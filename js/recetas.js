const jsonData = {
  "recetas": [
    {
      "id": "receta_1",
      "titulo": "Brownie",
      "ruta": "../img/recetas/receta_1.jpg",
      "Difilcultad": "Fácil",
      "TiempoTotal": "30 minutos",
      "Elaboracion": "10 minutos",
      "Coccion": "20 minutos",
      "ingredientes": [
        {
          "ingrediente": "Banano",
          "cantidad": "180 g"
        },
        {
          "ingrediente": "Huevos",
          "cantidad": "2 unid"
        },
        {
          "ingrediente": "Esencia de vainilla",
          "cantidad": "5 ml"
        },
        {
          "ingrediente": "Cacao puro en polvo sin azúcar",
          "cantidad": "50 g"
        },
        {
          "ingrediente": "Chocolate negro sin azúcar picado",
          "cantidad": "80 g"
        },
        {
          "ingrediente": "Bicarbonato sódico",
          "cantidad": "6 g"
        },
        {
          "ingrediente": "Sal",
          "cantidad": "1 g"
        },
        {
          "ingrediente": "Canela molida (opcional)",
          "cantidad": "1 g"
        },
        {
          "ingrediente": "Leche o bebida vegetal",
          "cantidad": "10 ml"
        }
      ],
      "descripcion": [
        "Precalentar el horno a 175ºC y cubrir con papel de hornear un molde cuadrado de unos 20 cm de lado. Si es más pequeño, las piezas de brownie saldrán más gruesas y algo más difíciles de cortar, pero también más esponjosas.",
        "Pelar los bananos y cortarlos en trozos. Colocar en un recipiente con los huevos y batir con un tenedor, machacándolos bien, o usar una batidora. También se puede emplear un procesador de alimentos o batidora de vaso. Incorporar el resto de ingredientes, salvo el chocolate, y batir un poco más hasta que no queden grumos secos.",
        "Añadir el chocolate negro picado o troceado y remover con suavidad. Llenar el molde y hornear durante unos 20 minutos. Al pinchar el centro con un palillo debe salir ligeramente manchado, pero no mojado. Dejar enfriar fuera del horno unos 10 minutos antes de desmoldar y trasladar con el propio papel a una rejilla.",
        "Esperar a que se enfríe por completo antes de cortar en piezas. Se cortará mejor si lo dejamos una o dos horas en la nevera, para que se asiente la miga. Guardar en un recipiente hermético en la nevera, sobre todo si hace mucho calor."
      ]
    },
    {
      "id": "receta_2",
      "titulo": "Pastel de manzana, avena y almendra",
      "ruta": "../img/recetas/receta_2.jpg",
      "Difilcultad": "Fácil",
      "TiempoTotal": "55 minutos",
      "Elaboracion": "10 minutos",
      "Coccion": "45 minutos",
      "ingredientes": [
        {
          "ingrediente": "Manzanas grandes (peladas y sin corazón)",
          "cantidad": "400 g"
        },
        {
          "ingrediente": "Huevos",
          "cantidad": "2 unid"
        },
        {
          "ingrediente": "Harina de avena",
          "cantidad": "30 g"
        },
        {
          "ingrediente": "Almendra molida",
          "cantidad": "30 g"
        },
        {
          "ingrediente": "Ralladura de limón ",
          "cantidad": "A gusto"
        },
        {
          "ingrediente": "Canela molida y más para espolvorear",
          "cantidad": "1 cucharadita"
        },
        {
          "ingrediente": "Levadura química",
          "cantidad": "1 cucharadita"
        },
        {
          "ingrediente": "Almendras para cubrir",
          "cantidad": "A gusto"
        },
        {
          "ingrediente": "Leche o bebida vegetal",
          "cantidad": "10 ml"
        }
      ],
      "descripcion": [
        "Precalentar el horno a 180ºC y engrasar con un poco de aceite un molde redondo de fondo desmontable, de unos 18-20 cm de diámetro, o forrar con papel antiadherente de hornear. La base es recomendable forrarla siempre con este papel.",
        "Lavar las manzanas, pelarlas y rallarlas finas o picarlas. Cuanto más pequeños sean los trocitos, más se fundirán en la masa. Mezclar con el zumo de limón y disponer en un recipiente. Añadir todos los demás ingredientes y batir con varillas, o triturar a velocidad baja si se desea con una batidora o robot unos segundos.",
        "Una vez homogénea, llevar al molde y cubrir con almendras al gusto y más canela. Hornear durante unos 40-45 minutos. Comprobar el punto con un palillo; el tiempo final depende del molde y tipo de horno. Esperar un poco fuera del horno antes de abrir y dejar enfriar por completo.",
        "Gana con el reposo de unas horas, cuando se asienta el relleno. Servir con más canela molida al gusto y guardar lo que sobre en la parte menos fría de la nevera."
      ]
    },
    {
      "id": "receta_3",
      "titulo": "Sorbete de mango y banano ",
      "ruta": "../img/recetas/receta_3.jpg",
      "Difilcultad": "Fácil",
      "TiempoTotal": "2 horas",
      "Elaboracion": "2 horas",
      "Coccion": "N/A",
      "ingredientes": [
        {
          "ingrediente": "Mango mediano",
          "cantidad": "1 unid"
        },
        {
          "ingrediente": "Banano",
          "cantidad": "1 unid"
        },
        {
          "ingrediente": "Chocolate negro sin azúcar para decorar",
          "cantidad": "--"
        },
        {
          "ingrediente": "Leche",
          "cantidad": "15 ml"
        }
      ],
      "descripcion": [
        "Para elaborar este sorbete de mango y plátano debemos comenzar pelando las frutas y cortando trozos de 2 cm de espesor. Colocamos sobre una fuente y llevamos al congelador.",
        "Cuando las frutas estén congeladas, las colocamos en una procesadora o batidora junto con la leche y procesamos hasta formar una preparación cremosa homogénea.",
        "Servimos en copas o recipientes individuales y decoramos con una cucharada de chocolate picado."
      ]
    },
    {
      "id": "receta_4",
      "titulo": "Rocas de chocolate",
      "ruta": "../img/recetas/receta_4.jpg",
      "Difilcultad": "Fácil",
      "TiempoTotal": "30 minutos",
      "Elaboracion": "30 minutos",
      "Coccion": "N/A",
      "ingredientes": [
        {
          "ingrediente": "Cereales integrales de trigo sin azúcares añadidos",
          "cantidad": "75 g"
        },
        {
          "ingrediente": "Mezcla de frutos secos",
          "cantidad": "75 g"
        },
        {
          "ingrediente": "Chocolate negro sin azúcar",
          "cantidad": "150 g"
        }
      ],
      "descripcion": [
        "Pon en un bol los cereales crujientes y rómpelos con las manos para que queden trozos pequeños. Pica los frutos secos a cuchillo, pero no muy pequeños, para que se identifiquen al comerlos en las rocas. Puedes utilizar una mezcla de nueces, almendras, avellanas, anacardos, cacahuetes, nueces de macadamia o si lo prefieres, un fruto seco sólo.",
        "Trocea el chocolate para fundirlo al baño maría en un cazo adecuado o en el microondas. Recuerda no pasar de 30 segundos cada vez, y retirarlo antes de que se funda del todo, es preferible terminar batiéndolo para, con su propio calor, conseguir un chocolate líquido brillante. Vierte el chocolate fundido sobre la mezcla de cereales integrales y frutos secos picados y mezcla bien. A continuación, con una cuchara ve cogiendo porciones y ve depositándolas sobre papel para hornear, formando rocas irregulares. Una vez hechas todas las rocas, deja en un lugar fresco para que se enfríe y el chocolate se endurezca.",
        "Tras el reposo, puedes retirar del papel las rocas de chocolate saludables y guardarlas en un recipiente con tapa hermética."
      ]
    }
  ]
};

function inicio(params) {
  var paramstr = window.location.search.substr(1);
  var paramarr = paramstr.split("&");
  var params = {};
  for (var i = 0; i < paramarr.length; i++) {
    var tmparr = paramarr[i].split("=");
    params[tmparr[0]] = tmparr[1];
  }
  if (params['receta']) {
    mensajeFuncion(params['receta'])
  } else {
    mensajeFuncion('all')
    console.log('No se envió el parámetro variable, se mostraran todos');
  }
}








let sectionItem = document.getElementById("container_recetas");


function mensajeFuncion(params) {
  console.log(params)
  let recetasArray = jsonData.recetas
  for (let i = 0; i < recetasArray.length; i++) {
    const element = recetasArray[i];
    console.log(params +"<>"+ element.id)
    if (params == element.id ) {
      divDeleted = document.getElementById("receta_1");
      if (!divDeleted) { }
      else {
        console.log('1')
        sectionItem = divDeleted.parentNode;
        sectionItem.removeChild(divDeleted);
      }
      mostrarReceta(element)

    }else if ( params=='all') {
      divDeleted = document.getElementById("receta_1");
     
      mostrarReceta(element)

    }
  }
}

function mostrarReceta(params) {
  //crear los ingredientes
  let ingredientesString = ''
  for (let i = 0; i < params.ingredientes.length; i++) {
    ingredientesString += '<tr><td>' + params.ingredientes[i].ingrediente + '</td><td>' + params.ingredientes[i].cantidad + '</td></ >'
  }
  let tablaIngredientes = '<table class="table table-striped table-bordered"><thead><tr><td>INGREDIENTES</td><td>CANTIDAD</td></tr></thead><tbody>' + ingredientesString + '</tbody></table>'
  
  // crear el parrafo
  let descripcionString = ''
  for (let i = 0; i < params.descripcion.length; i++) {
    descripcionString += params.descripcion[i] + '<br><br>'
  }
  descripcionString = '<p>' + descripcionString + '</p>'
  let htmlParte1 = '<h1 id="receta_title_vista">' + params.titulo + '</h1>'
  let htmlParte2 = '<img src="' + params.ruta + '" alt="">'
  let htmlParte3 = '<h2>Difilcultad: <span>' + params.Difilcultad + '</span></h2>'
  let htmlParte4 = '<h2>Tiempo Total: <span>' + params.TiempoTotal + '</span></h2>'
  let htmlParte5 = '<h2>Elaboración: <span>' + params.Elaboracion + '</span></h2>'
  let htmlParte6 = '<h2>Cocción: <span>' + params.Coccion + '</span></h2>'
  let htmlParte7 = '<div><h3>Que necesitamos...</h3>' + tablaIngredientes + '<div id="separador"></div>' + descripcionString + '<div id="separador_receta"></div></div>'
    let htmlUnido = '<div class="receta" id="receta_1">' + htmlParte1 + htmlParte2 + htmlParte3 + htmlParte4 + htmlParte5 + htmlParte6 + htmlParte7 + '</div>'
  sectionItem.innerHTML += htmlUnido
}


inicio()
